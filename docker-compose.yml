# docker-compose.yml
#
# Deploy-only compose file: pulls a prebuilt image (no local build).
# For first run, create config.conf from config.conf.example.

services:
  web_ai:
    image: ${IMAGE_NAME:-ghcr.io/qingwo1991-debug/webai-to-api}:${IMAGE_TAG:-latest}
    container_name: web_ai_server
    restart: unless-stopped
    ports:
      - "6969:6969"
    env_file:
      - .env
    environment:
      PYTHONPATH: /app/src
      ENVIRONMENT: ${ENVIRONMENT:-production}
    volumes:
      - ./config.conf:/app/config.conf
    command: >
      sh -c "uvicorn app.main:app --host 0.0.0.0 --port 6969 --workers 4 --log-level info"
